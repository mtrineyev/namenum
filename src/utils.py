"""
Translates natural NUMBERS as well as powers of 10 into their nominal names

Functions:
    get_ten_power(text: str) -> str
        Returns power of 10 name

    my_eval(text: str, short: bool, uah: bool) -> str
        Evaluates text, calculates factorial if necessary,
        formats result as short or/and uah

    parse(text: str) -> tuple
        Finds "short" and "uah" in text and delete them
        returns stripped text, short and uah

    words(value: int, short=False, uah=False) -> str
        Converts integer to its nominal name
    
NameTheNumberBot v2.0 (c) 2020-2023 Maksym Trineyev
mtrineyev@gmail.com
"""
from random import choice

from src.thesaurus.commands import SHORTS, UAH
from src.thesaurus.messages import (
    TRANSLATE_NUM_KEY_ERR, POWER10_TOO_BIG, POWER10_WRONG_POWER,
    EVAL_ERR, ERRORS
)


NUMBERS = {
    0: "Ð½ÑƒÐ»ÑŒ",
    1: "Ð¾Ð´Ð¸Ð½",
    2: "Ð´Ð²Ð°",
    3: "Ñ‚Ñ€Ð¸",
    4: "Ñ‡Ð¾Ñ‚Ð¸Ñ€Ð¸",
    5: "Ð¿'ÑÑ‚ÑŒ",
    6: "ÑˆÑ–ÑÑ‚ÑŒ",
    7: "ÑÑ–Ð¼",
    8: "Ð²Ñ–ÑÑ–Ð¼",
    9: "Ð´ÐµÐ²'ÑÑ‚ÑŒ",
    10: "Ð´ÐµÑÑÑ‚ÑŒ",
    11: "Ð¾Ð´Ð¸Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    12: "Ð´Ð²Ð°Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    13: "Ñ‚Ñ€Ð¸Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    14: "Ñ‡Ð¾Ñ‚Ð¸Ñ€Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    15: "Ð¿'ÑÑ‚Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    16: "ÑˆÑ–ÑÑ‚Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    17: "ÑÑ–Ð¼Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    18: "Ð²Ñ–ÑÑ–Ð¼Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    19: "Ð´ÐµÐ²'ÑÑ‚Ð½Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    20: "Ð´Ð²Ð°Ð´Ñ†ÑÑ‚ÑŒ",
    30: "Ñ‚Ñ€Ð¸Ð´Ñ†ÑÑ‚ÑŒ",
    40: "ÑÐ¾Ñ€Ð¾Ðº",
    50: "Ð¿'ÑÑ‚Ð´ÐµÑÑÑ‚",
    60: "ÑˆÑ–ÑÑ‚Ð´ÐµÑÑÑ‚",
    70: "ÑÑ–Ð¼Ð´ÐµÑÑÑ‚",
    80: "Ð²Ñ–ÑÑ–Ð¼Ð´ÐµÑÑÑ‚",
    90: "Ð´ÐµÐ²'ÑÐ½Ð¾ÑÑ‚Ð¾",
    100: "ÑÑ‚Ð¾",
    200: "Ð´Ð²Ñ–ÑÑ‚Ñ–",
    300: "Ñ‚Ñ€Ð¸ÑÑ‚Ð°",
    400: "Ñ‡Ð¾Ñ‚Ð¸Ñ€Ð¸ÑÑ‚Ð°",
    500: "Ð¿'ÑÑ‚ÑÐ¾Ñ‚",
    600: "ÑˆÑ–ÑÑ‚ÑÐ¾Ñ‚",
    700: "ÑÑ–Ð¼ÑÐ¾Ñ‚",
    800: "Ð²Ñ–ÑÑ–Ð¼ÑÐ¾Ñ‚",
    900: "Ð´ÐµÐ²'ÑÑ‚ÑÐ¾Ñ‚",
}

POWERS10 = {
    0: ("Ð¾Ð´Ð¸Ð½", "Ð¾Ð´Ð¸Ð½", "Ð¾Ð´Ð¸Ð½"),
    1: ("Ð´ÐµÑÑÑ‚ÑŒ", "Ð´ÐµÑÑÑ‚ÑŒ", "Ð´ÐµÑÑÑ‚ÑŒ"),
    2: ("ÑÑ‚Ð¾", "ÑÐ¾Ñ‚Ð½Ñ–", "ÑÐ¾Ñ‚ÐµÐ½ÑŒ"),
    3: ("Ñ‚Ð¸ÑÑÑ‡Ð°", "Ñ‚Ð¸ÑÑÑ‡Ñ–", "Ñ‚Ð¸ÑÑÑ‡"),
    6: ("Ð¼Ñ–Ð»ÑŒÐ¹Ð¾Ð½", "Ð¼Ñ–Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð¼Ñ–Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    9: ("Ð¼Ñ–Ð»ÑŒÑÑ€Ð´", "Ð¼Ñ–Ð»ÑŒÑÑ€Ð´Ð¸", "Ð¼Ñ–Ð»ÑŒÑÑ€Ð´Ñ–Ð²"),
    12: ("Ñ‚Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    15: ("ÐºÐ²Ð°Ð´Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ð´Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ð°Ð´Ñ€Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    18: ("ÐºÐ²Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    21: ("ÑÐµÐºÑÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐºÑÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐºÑÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    24: ("ÑÐµÐ¿Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ¿Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐ¿Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    27: ("Ð¾ÐºÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð¾ÐºÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð¾ÐºÑ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    30: ("Ð½Ð¾Ð½Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð½Ð¾Ð½Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð½Ð¾Ð½Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    33: ("Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    36: ("ÑƒÐ½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑƒÐ½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑƒÐ½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    39: ("Ð´ÑƒÐ¾Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÑƒÐ¾Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÑƒÐ¾Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    42: ("Ñ‚Ñ€ÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€ÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€ÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    45: ("ÐºÐ²Ð°Ñ‚Ñ‚ÑƒÐ¾Ñ€Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ñ‚Ñ‚ÑƒÐ¾Ñ€Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ð°Ñ‚Ð¾Ñ€Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    48: ("ÐºÐ²Ñ–Ð½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ñ–Ð½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ñ–Ð½Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    51: ("ÑÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐ´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    54: ("ÑÐµÐ¿Ñ‚Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ¿Ñ‚Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐ¿Ñ‚Ð´ÐµÑ†Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    57: ("Ð´ÑƒÐ¾Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÑƒÐ¾Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÑƒÐ¾Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    60: ("ÑƒÐ½Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑƒÐ½Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑƒÐ½Ð´ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    63: ("Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    66: ("Ð°Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð°Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð°Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    69: ("Ð´ÑƒÐ¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÑƒÐ¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÑƒÐ¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    72: ("Ñ‚Ñ€ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€ÐµÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    75: ("ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
         "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    78: ("ÐºÐ²Ñ–Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ñ–Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ñ–Ð½Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    81: ("ÑÐµÐºÑÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐºÑÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐºÑÐ²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    84: ("ÑÐµÐ¿Ñ‚ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ¿Ñ‚ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
         "ÑÐµÐ¿Ñ‚ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    87: ("Ð¾ÐºÑ‚Ð¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð¾ÐºÑ‚Ð¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð¾ÐºÑ‚Ð¾Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    90: ("Ð½Ð¾Ð²ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð½Ð¾Ð²ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð½Ð¾Ð²ÐµÐ¼Ð²Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    93: ("Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    96: ("Ð°Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð°Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð°Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    99: ("Ð´ÑƒÐ¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÑƒÐ¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÑƒÐ¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    100: ("Ð³ÑƒÐ³Ð¾Ð»", "Ð³ÑƒÐ³Ð¾Ð»Ð¸", "Ð³ÑƒÐ³Ð¾Ð»Ñ–Ð²"),
    102: ("Ñ‚Ñ€ÐµÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€ÐµÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€ÐµÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    105: ("ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
          "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    108: ("ÐºÐ²Ñ–Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ñ–Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ñ–Ð½Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    111: ("ÑÐµÐºÑÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐºÑÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐºÑÑ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    114: ("ÑÐµÐ¿Ñ‚ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ¿Ñ‚ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
          "ÑÐµÐ¿Ñ‚ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    117: ("Ð¾ÐºÑ‚Ð¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð¾ÐºÑ‚Ð¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð¾ÐºÑ‚Ð¾Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    120: ("Ð½Ð¾Ð²ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð½Ð¾Ð²ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
          "Ð½Ð¾Ð²ÐµÐ¼Ñ‚Ñ€Ñ–Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    123: ("ÐºÐ²Ð°Ð´Ñ€Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ð´Ñ€Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ð°Ð´Ñ€Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    153: ("ÐºÐ²Ñ–Ð½ÐºÐ²Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ñ–Ð½ÐºÐ²Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ñ–Ð½ÐºÐ²Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    183: ("ÑÐµÐºÑÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐºÑÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐºÑÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    213: ("ÑÐµÐ¿Ñ‚ÑƒÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÑÐµÐ¿Ñ‚ÑƒÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÑÐµÐ¿Ñ‚ÑƒÐ°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    243: ("Ð¾ÐºÑ‚Ð¾Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð¾ÐºÑ‚Ð¾Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð¾ÐºÑ‚Ð¾Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    273: ("Ð½Ð¾Ð½Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð½Ð¾Ð½Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð½Ð¾Ð½Ð°Ð³Ñ–Ð½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    600: ("Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    603: ("Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    606: ("Ñ‚Ñ€ÐµÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "Ñ‚Ñ€ÐµÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "Ñ‚Ñ€ÐµÑ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    609: ("ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½", "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ð¸", "ÐºÐ²Ð°Ñ‚Ñ‚Ð¾Ñ€Ñ†ÐµÐ½Ñ‚Ð¸Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
    666: ("ðŸ˜ˆ", "ðŸ˜ˆ", "ðŸ˜ˆ"),
    1991: ("Ð—Ð³Ð¸Ð½ÑƒÑ‚ÑŒ Ð½Ð°ÑˆÑ– Ð²Ð¾Ñ€Ð¾Ð¶ÐµÐ½ÑŒÐºÐ¸, ÑÐº Ñ€Ð¾ÑÐ° Ð½Ð° ÑÐ¾Ð½Ñ†Ñ–\\! â¤ï¸ðŸ‡ºðŸ‡¦",
           "Ð—Ð³Ð¸Ð½ÑƒÑ‚ÑŒ Ð½Ð°ÑˆÑ– Ð²Ð¾Ñ€Ð¾Ð¶ÐµÐ½ÑŒÐºÐ¸, ÑÐº Ñ€Ð¾ÑÐ° Ð½Ð° ÑÐ¾Ð½Ñ†Ñ–\\! â¤ï¸ðŸ‡ºðŸ‡¦",
           "Ð—Ð³Ð¸Ð½ÑƒÑ‚ÑŒ Ð½Ð°ÑˆÑ– Ð²Ð¾Ñ€Ð¾Ð¶ÐµÐ½ÑŒÐºÐ¸, ÑÐº Ñ€Ð¾ÑÐ° Ð½Ð° ÑÐ¾Ð½Ñ†Ñ–\\! â¤ï¸ðŸ‡ºðŸ‡¦",),
    308760: ("Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð´ÑƒÐ¾Ð¼Ñ–Ð»Ñ–Ð°Ð½Ð¾Ð½Ð³ÐµÐ½Ñ‚Ð½Ð¾Ð²ÐµÐ¼Ð´ÐµÑ†Ñ–Ð»ÑŒÐ¹Ð¾Ð½",
             "Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð´ÑƒÐ¾Ð¼Ñ–Ð»Ñ–Ð°Ð½Ð¾Ð½Ð³ÐµÐ½Ñ‚Ð½Ð¾Ð²ÐµÐ¼Ð´ÐµÑ†Ñ–Ð»ÑŒÐ¹Ð¾Ð½Ð¸",
             "Ð´ÑƒÑ†ÐµÐ½Ñ‚Ð´ÑƒÐ¾Ð¼Ñ–Ð»Ñ–Ð°Ð½Ð¾Ð½Ð³ÐµÐ½Ñ‚Ð½Ð¾Ð²ÐµÐ¼Ð´ÐµÑ†Ñ–Ð»ÑŒÐ¹Ð¾Ð½Ñ–Ð²"),
}

HRIVNAS = ("Ð³Ñ€Ð¸Ð²Ð½Ñ", "Ð³Ñ€Ð¸Ð²Ð½Ñ–", "Ð³Ñ€Ð¸Ð²ÐµÐ½ÑŒ")


def words(value: int, short=False, uah=False) -> str:
    """To convert big integer to its nominal name"""
    result = ""
    minus = ""
    if value < 0:
        minus = "ÐœÑ–Ð½ÑƒÑ "
        value = - value
    grades = f"{value:,d}".split(",")
    grade_pow = (len(grades) - 1) * 3
    for grade in grades:
        n = int(grade)
        if n or not result:
            result += _hundreds(n, short)
            if grade_pow:
                try:
                    result += _plural(n, POWERS10[grade_pow])
                except KeyError:
                    return TRANSLATE_NUM_KEY_ERR
        grade_pow -= 3
    result = _correct_small_plural(result, "Ñ‚Ð¸ÑÑÑ‡Ð°", "Ñ‚Ð¸ÑÑÑ‡Ñ–")
    if uah:
        result += _plural(int(grades[-1]), HRIVNAS)
        result = _correct_small_plural(result, "Ð³Ñ€Ð¸Ð²Ð½Ñ", "Ð³Ñ€Ð¸Ð²Ð½Ñ–")
    return f"{minus}{result}".capitalize()


def _plural(amount: int, plurals: tuple) -> str:
    """Returns corresponding plural from the tuple to 1, 2, 5 principal"""
    if amount == 0:
        return ""
    mod = amount % 100
    if mod > 20:
        mod %= 10
    if mod == 1:
        result = plurals[0]
    elif mod in (2, 3, 4):
        result = plurals[1]
    else:
        result = plurals[2]
    return f" {result} "


def _hundreds(value: int, short: bool) -> str:
    """Convert small int to its nominal name or just return str"""
    if short:
        return str(value)
    if not value:
        return NUMBERS[0]
    result = ""
    hundreds, tens = divmod(value, 100)
    if hundreds:
        result = f"{NUMBERS[hundreds * 100]} "
    if 0 < tens <= 20:
        result += NUMBERS[tens]
    elif tens:
        tens, units = divmod(tens, 10)
        result += NUMBERS[tens * 10]
        if units:
            result += f" {NUMBERS[units]}"
    return result.strip()


def _correct_small_plural(text: str, word1: str, word2: str) -> str:
    return text.replace(f"Ð¾Ð´Ð¸Ð½ {word1}", f"Ð¾Ð´Ð½Ð° {word1}")\
        .replace(f"Ð´Ð²Ð° {word2}", f"Ð´Ð²Ñ– {word2}")


def get_ten_power(power: str) -> str:
    try:
        value = int(power)
    except ValueError:
        return POWER10_WRONG_POWER
    if value in POWERS10:
        result = f"{POWERS10[value][0]}"
    elif value - 1 in POWERS10:
        result = f"{NUMBERS[10]} {POWERS10[value - 1][2]}"
    elif value - 2 in POWERS10:
        result = f"{NUMBERS[100]} {POWERS10[value - 2][2]}"
    else:
        return POWER10_TOO_BIG.format(value)
    return result.capitalize()


def parse(text: str) -> tuple:
    user_input = text
    if short := _detect(user_input, SHORTS):
        user_input = _prune(user_input, SHORTS)
    if uah := _detect(user_input, UAH):
        user_input = _prune(user_input, UAH)
    return user_input.strip(), short, uah


def _detect(text: str, patterns) -> bool:
    return any([p in text.lower() for p in patterns])


def _prune(text: str, patterns) -> str:
    stripped = text.lower()
    for pattern in patterns:
        stripped = stripped.replace(pattern, "")
    return stripped


def my_eval(text: str, short: bool, uah: bool) -> str:
    try:
        value = (factorial(int(text[:-1]))
                 if is_factorial(text) else eval(text))
        if isinstance(value, int) or isinstance(value, float):
            return (_format_num(value, uah) +
                    words(int(round(value, 0)), short, uah))
        else:
            raise ValueError
    except (SyntaxError, ZeroDivisionError, TypeError, ValueError):
        return EVAL_ERR
    except NameError:
        return choice(ERRORS)


def factorial(n: int) -> int:
    if n < 0 or n > 1000:
        raise ValueError
    result = 1
    for i in range(2, n + 1):
        result *= i
    return result


def is_factorial(text: str) -> bool:
    return text[-1] == "!" and text[:-1].isdecimal()


def _format_num(number: float, uah: bool) -> str:
    result = f"\\= {int(number):,d}".replace("-", r"\-")
    if isinstance(number, float):
        result += f"{number-int(number):.2f}".replace(".", r"\.")[1:]
    return _add_uah(result, uah) + "\n\n"


def _add_uah(text: str, uah: bool) -> str:
    return text + (r" Ð³Ñ€Ð½\." if uah else "")


if __name__ == "__main__":
    print(__doc__)
